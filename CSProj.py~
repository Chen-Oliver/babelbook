#!/usr/bin/python
# You shouldn't delete the line above. Bad things will happen
print "Content-Type: text/html\n"# Not this one either
# Just don't delete anything.
print ""
# If there are less than 3 lines excluding the warnings, cry, because now you must find
# out what must be retyped, and that requires work
print "<!DOCTYPE html>"
print "<html>" # don't delete this either
print "<title>Gibberish</title>"
print "<center><h1>Randomly Generated Gibberish</h1></center>"
import cgi
import cgitb
#cgitb.enable()  #diag info --- comment out once full functionality achieved
import random

def FStoD():
    '''
    Converts cgi.FieldStorage() return value into a standard dictionary
    '''
    d = {}
    formData = cgi.FieldStorage()
    for k in formData.keys():
        d[k] = formData[k].value
    return d
d=FStoD()
keys=d.keys()
try:
    userL= d[keys[keys.index(min(keys))]]
except:
    userL = 40
LBAlph= ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', \
      'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z']
LBPunct= [', ', '. ', ' ']
def probs():
    x = 100
    if x >= 0:
        if random.randrange(101)<x:
            x-=2
            return True
        else:
           
           return False
    else:
        x=100
        return False

def lines(length,linesL,userL):
    line = ''
    if int(userL) == linesL:
        for l in range(linesL):
            for n in range(length):
                if probs():
                    line += str(LBAlph[random.randrange(26)])
                else:
                    line += str(LBPunct[random.randrange(3)])
            if l == 0:
                line = '<p>' + line +'<br><br>'
            if l == 39:
                line += '</p>'
            if l != 0 and l!= 39:
                line += '<br><br>'
    else:
        for l in range(int(userL)):
            for n in range(length):
                if probs():
                    line += str(LBAlph[random.randrange(27)])
                else:
                    line += str(LBPunct[random.randrange(3)])
            if l == 0:
                line ='<p>' + line + '<br>'                
            if l == userL - 1:
                line += '</p>'                
            if l != 0 and l!= userL-1:
                line +='<br>'
    return line
def book():
    b= ''
    for n in range(410):
        b += '<center><pre>'
        b += lines(80,40,userL)
        b += '</pre></center>'
        b += "<h4><center>Page "+str(n+1)+"</h4><center><br><br>"
    return b

print book()



print '<link rel="stylesheet" type="text/css" href="styles.css">'
print "</html>" 
 

